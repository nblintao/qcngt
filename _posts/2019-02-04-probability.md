---
title: 因消防检查但想睡懒觉想到的一个概率问题
---
上星期六，大年初一，早上九点钟，我被小区里的消防警报吵醒。

想起来原来是要入户消防检查。预约的时间是那一整天白天，但具体什么时间到哪一户不知道。

我家门铃一直是坏的，要是来消防检查的人按门铃，在卧室根本听不到。​

那岂不是得去客厅等，睡不成懒觉了？

我坚强地哆嗦着从被窝中钻出来，好不容易找到纸，写上门铃坏了，留了个电话，贴在外面的门铃上。

重新滚进温暖的被窝。

然而还是不能睡懒觉，因为睡着了可能就听不到敲门或者电话声了。

然后就开始瞎想。

还有两个室友在家呢，是不是应该轮流来等敲门？

但如果轮流来等的话，每个人应该等多久才公平呢？

肯定不能平均分配每个人的“值班”时间，因为很可能还没轮到排后面的人，消防检查就结束了，排越后面就越合算。

如果假设来消防检查的时间在整个白天里是随机的，要怎么分配才能让每个人理论上要等的时间一样呢？

有兴趣的读者可以在这里停下来想一下。



我们可以考虑计算这样一个东西：

一个事件在一段时间内随机发生。从这段时间的起点到这个事件的发生需要等待。求在某个时间点，已等待时间占总共需等待时间的比率的期望。

躺在床上，记性又不行，怎么办？

打开手机上的备忘录，调出画笔，开始列式子。

为了省事，把这段时间的长度就当作1。如果要完整的设成未知数写出来，也是一样的。

为了求某个时间点T（T在0与1之间）的这个比率的期望，假设事件发生在t时刻。

有T的可能性，这个事件已经发生了（也就是t早于T）。在这种情况下，已等待时间和总共需等待时间都等于t，这个比率就是1。

如果这个事件还没发生，已等待时间是T，总共需要等待时间是t。让t取在T到1之间，把这个比率积起来。

说了这么多，其实式子列出来其实很简单：

<img src="https://latex.codecogs.com/svg.latex?T&plus;\int_T^1\frac{T}{t}dt" title="T+\int_T^1\frac{T}{t}dt" />

几年没碰数学，但这个积分还是行的，结果是T - T lnT。

（啊，上面的真的不是表情T^T）

用居家旅行必备最适合用于躺在床上想心事的计算神器Wolfram Alpha算得：

当期望等于0.5时，T等于0.187。

也就是说，如果两个人轮班等，前面那个人的值班时间是前五分之一都不到。

这有点不符合直觉，比我预想的要短不少。

我原先估计，它应该是在四分之一和二分之一之间。因为总等待时间的期望是二分之一，每个人等待时间的期望就是四分之一。第一个人为了实现四分之一的期望，值班的时间总要超过四分之一吧？

我到底有没有弄错，我也不知道。欢迎告诉我。

至于三个人轮班，算下来第一个人只要十分之一左右。有意思。

想到这里，消防检查的人就来了。

 看来这个研究成果这次是用不到了。起床，开门。

顺便说一下消防检查检查了啥。

其实就是物业派人（还是消防局派的人？）测试家里各个房间的烟雾报警器能不能正常工作。

之间那人先拿一个喷罐往烟雾报警器一喷。报警器定眼儿一看，感觉是烟雾，警报大作。他再拿另一个不知道装了什么东西的喷罐一喷，烟雾消失，警报也停了。

跟明教的五行旗一样。

送走消防检查的人，终于能睡懒觉了？

我这才发现，东一声，西一声，此起彼伏警报声，还是睡不成。
